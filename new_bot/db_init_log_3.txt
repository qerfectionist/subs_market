INFO:__main__:Creating tables...
Traceback (most recent call last):
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
    return await waiter
asyncpg.exceptions.UndefinedColumnError: column "user_id" referenced in foreign key constraint does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column "user_id" referenced in foreign key constraint does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\new_bot\create_tables.py", line 36, in <module>
    asyncio.run(init_models())
  File "C:\Users\qerfe\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 686, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\new_bot\create_tables.py", line 31, in init_models
    await conn.run_sync(Base.metadata.create_all)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2467, in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 984, in visit_metadata
    self.traverse_single(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1022, in visit_table
    )._invoke_with(self.connection)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\qerfe\Desktop\telegram_export\subs_market\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column "user_id" referenced in foreign key constraint does not exist
[SQL: 
CREATE TABLE clubs (
	club_id UUID NOT NULL, 
	tenant_id UUID NOT NULL, 
	owner_user_id UUID NOT NULL, 
	service_id UUID NOT NULL, 
	tariff_id UUID NOT NULL, 
	title VARCHAR NOT NULL, 
	price_amount INTEGER NOT NULL, 
	status clubstatus NOT NULL, 
	CONSTRAINT pk_clubs PRIMARY KEY (club_id), 
	CONSTRAINT fk_clubs_tenant_id_tenants FOREIGN KEY(tenant_id) REFERENCES tenants (tenant_id), 
	CONSTRAINT fk_clubs_owner_user_id_users FOREIGN KEY(owner_user_id) REFERENCES users (user_id), 
	CONSTRAINT fk_clubs_service_id_subscription_services FOREIGN KEY(service_id) REFERENCES subscription_services (service_id), 
	CONSTRAINT fk_clubs_tariff_id_subscription_tariffs FOREIGN KEY(tariff_id) REFERENCES subscription_tariffs (tariff_id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
